<!DOCTYPE html>
<html>
<head>
    <title>D3.js Demo</title>
    <meta charset="UTF-8">
    <!-- Importing the JS CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.158.0/three.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
    <h1>Dominic Arthur</h1>

    <script type="text/javascript"> 
    // AJAX request to fetch CO2 data
        
        $.getJSON("https://pkgstore.datahub.io/core/co2-ppm/co2-mm-mlo_json/data/aed7eb0d19cbcd90790525d40728b0a8/co2-mm-mlo_json.json", function (data) {
            console.log(data);
            // Call the function to plot CO2 data
            plotCO2Data(data);
        });

        function plotCO2Data(data) {
            // D3.js code for plotting CO2 data goes here
            // Setting up margins and dimensions for the chart
            var margin = { top: 50, right: 50, bottom: 50, left: 50},
                width = 900 - margin.left - margin.right,
                height = 670 - margin.top - margin.bottom;

            // Creating x and y scales
            var y = d3.scaleLinear()
                .domain(d3.extent(data, function (d) { return d["interpolated"]}))
                .range([height, 0]);  // y-axis values go from the bottom to the top of the SVG

            // Parsing the date using D3's timeParse function
            var pDate = d3.timeParse("%Y-%d-%m");
            
            // Creating x scale as a time scale
            var x = d3.scaleTime()
            .domain(d3.extent(data, function (d) { return pDate(d["Date"]); })) // Mapping the Date values to the x-axis
            .range([0, width]); // x-axis values go from left to right of the SVG

           // Creating x-axis and y-axis
             xAxis = d3.axisBottom(x).ticks(3); // x-axis with 3 ticks
             yAxis = d3.axisLeft(y).ticks(3); // y-axis with 3 ticks

            // Creating a line function for the main data
var line = d3.line()
    .x(function (d) { return x(parseDate(d["Date"])); }) // Mapping x-values using the parsed date
    .y(function (d) { return y(d["Interpolated"]); }); // Mapping y-values for the "Interpolated" data

            // Creating a line function for the trend data
var tLine = d3.line()
    .x(function (d) { return x(parseDate(d["Date"])); }) // Mapping x-values using the parsed date
    .y(function (d) { return y(d["Trend"]); }); // Mapping y-values for the "Trend" data

        };
</script>
</body>
</html>
